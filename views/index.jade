doctype html
html(lang="en")
    head
        title= "Shithead"
        meta(charset="UTF-8")
        link(rel="stylesheet", href="/css/style.css", type="text/css")
    body
        div(id="playerData")
            p(id="pc") Player count: #[span= playerCount]
            ul(id="playersList")
                each player in players
                    li= player._nickname

        script(src="http://code.jquery.com/jquery-1.11.1.js")
        script(src="/socket.io/socket.io.js")
        script.
            var socket = io();

                function init(){

                }

            function updatePlayerList(players){

                // Empty list
                $('#playersList').html('');

                for( var i = 0; i< players.length; i++){

                    $('#playersList').append(
                            $('<li>', {
                                text: players[i]._nickname
                            })
                    );
                }
            }


            function updatePlayerCount(count){
                $('#pc').find('span').text(count);
            }
            socket.on('chooseNickname', function(){
                var name = prompt("What is your name? ");
                socket.emit('register', name);
            });

            socket.on('newPlayer', function(data){
                updatePlayerCount(data.playerCount);
                updatePlayerList(data.players);
            });

            socket.on('playerLeft', function(data){
                updatePlayerCount(data.playerCount);
                updatePlayerList(data.players);
            });

            socket.on('lateJoin', function(){
                alert('The game already started, you can no longer join.')
            });

            $(function(){
                init();
            });